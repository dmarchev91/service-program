<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Създаване на сервизен протокол</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
    <style>
        .form-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            margin: auto;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }
        .input-group-text {
            background-color: #fff;
        }
        .checkbox-inline {
            margin-right: 10px;
        }
        .select2-container--default .select2-selection--single {
            border-radius: 0.25rem;
            height: calc(1.5em + 0.75rem + 2px);
            padding: 0.375rem 0.75rem;
            border: 1px solid #ced4da;
        }

        .select2-container .select2-selection--single {
            height: auto; /* Adjust height as necessary */
        }

        .input-group .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: calc(1.5em + 0.75rem + 2px); /* Match the height of the input field */
        }

    </style>
</head>
<body>

<div class="container mt-5">
    <form id="myForm" action="/submit-form" method="post" class="form-container">
        <div class="form-group">
            <label for="phone"></label>
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-phone"></i></span>
                </div>
                <input type="text" class="form-control" id="phone" name="phone" placeholder="+359" required>
            </div>
        </div>

       <div class="form-group">
            <label for="device_type"></label>
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-mobile-alt"></i></span> <!-- Change the icon class as needed -->
                </div>
                <select class="form-control select2-hidden-accessible" id="device_type" name="device_type" data-select2-id="device_type" tabindex="-1" aria-hidden="true">
                    <option value="Телефон">Телефон</option>
                    <option value="Лаптоп">Лаптоп</option>
                    <option value="Playstation">PlayStation</option>
                    <option value="Други">Други</option>
                </select>
            </div>
        </div>


        <div class="form-group">
            <label for="model"></label>
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-laptop-medical"></i></span>
                </div>
                <input type="text" class="form-control" id="model" name="model" placeholder="Модел" required>
            </div>
        </div>

        <div class="form-group">
            <label for="info"></label>
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-info"></i></span>
                </div>
                <input type="text" class="form-control" id="info" name="info" placeholder="Информация за повредата">
            </div>
        </div>

        <div class="form-group">
            <label for="offered_price"></label>
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-tag"></i></span>
                </div>
                <input type="number" class="form-control" id="offered_price" name="offered_price" placeholder="Оферирана цена" step="0.01" required>
            </div>
        </div>

        <h4>Налични аксесоари</h4>
        <div class="form-group">
            <div class="form-check form-check-inline checkbox-inline">
                <input class="form-check-input" type="checkbox" id="case" name="accessory_case" value="case">
                <label class="form-check-label" for="case">Кейс</label>
            </div>
            <div class="form-check form-check-inline checkbox-inline">
                <input class="form-check-input" type="checkbox" id="bag" name="accessory_bag" value="bag">
                <label class="form-check-label" for="bag">Чанта</label>
            </div>
            <div class="form-check form-check-inline checkbox-inline">
                <input class="form-check-input" type="checkbox" id="charger" name="accessory_charger" value="charger">
                <label class="form-check-label" for="charger">Зарядно</label>
            </div>
            <div class="form-check form-check-inline checkbox-inline">
                <input class="form-check-input" type="checkbox" id="sim" name="accessory_sim" value="sim">
                <label class="form-check-label" for="sim">Сим</label>
            </div>
        </div>

        <div class="form-group">
            <input type="text" class="form-control" id="other_info" name="other_info" placeholder="Допълнителна информация">
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="pincode">PIN</label>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-key"></i></span>
                        </div>
                        <input type="text" class="form-control" id="pincode" name="pincode" placeholder="PIN">
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="passcode">Парола</label>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-lock"></i></span>
                        </div>
                        <input type="text" class="form-control" id="passcode" name="passcode" placeholder="Парола">
                    </div>
                </div>
            </div>
        </div>

        <div class="row justify-content-end mb-3">
            <div class="col-md-4">
                <img src="/static/security_icon.jpg" alt="Security Icon" class="img-fluid" style="max-height: 150px;">
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <button type="submit" class="btn btn-primary btn-lg btn-block">Регистрирай устройство</button>
            </div>
            <div class="col-md-6">
                <button type="button" class="btn btn-secondary btn-lg btn-block" onclick="window.location.href='/';">Назад</button>
            </div>
        </div>
    </form>
</div>



<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
<script>
    document.getElementById('myForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the default form submission action

        var formData = new FormData(this);

        // Use fetch() to submit the form data asynchronously
        fetch('/submit-form', {
            method: 'POST',
            body: formData
        }).then(response => {
            if (response.redirected) {
                // Redirect to the protocol template page
                window.location.href = response.url;
            } else {
                console.error('Form submission failed');
                alert('An error occurred during submission.');
            }
        }).catch(error => {
            console.error('Error submitting form:', error);
            alert('Error occurred. Please try again.');
        });
    });
</script>

</html>


table {
    width: 100%;
    word-wrap: break-word;